{"version":3,"sources":["node_modules/browser-pack/_prelude.js","scripts/main.js","scripts/priority-nav-scroller.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import PriorityNavScroller from './priority-nav-scroller.js';\n\n// // Init with default setup\n// const priorityNavScrollerDefault = PriorityNavScroller();\n\n// // Init with all options at default setting\n// const priorityNavScrollerDefault = PriorityNavScroller({\n//   selector: '.nav-scroller',\n//   navSelector: '.nav-scroller-nav',\n//   contentSelector: '.nav-scroller-content',\n//   itemSelector: '.nav-scroller-item',\n//   buttonLeftSelector: '.nav-scroller-btn--left',\n//   buttonRightSelector: '.nav-scroller-btn--right',\n//   scrollStep: 75\n// });\n\n// Init multiple nav scrollers with the same options\nlet navScrollers = document.querySelectorAll('.nav-scroller');\n\nnavScrollers.forEach((currentValue, currentIndex) => {\n  PriorityNavScroller({\n    selector: currentValue\n  });\n});\n","/**\n * Priority+ horizontal scrolling menu.\n * @param {Object} object - Container for all options.\n * @param {string || DOM node} selector - Element selector.\n * @param {string} navSelector - Nav element selector.\n * @param {string} contentSelector - Content element selector.\n * @param {string} itemSelector - Items selector.\n * @param {string} buttonLeftSelector - Left button selector.\n * @param {string} buttonRightSelector - Right button selector.\n * @param {integer || string} scrollStep - Amount to scroll on button click.\n */\n\nconst PriorityNavScroller = function({\n    selector: selector = '.nav-scroller',\n    navSelector: navSelector = '.nav-scroller-nav',\n    contentSelector: contentSelector = '.nav-scroller-content',\n    itemSelector: itemSelector = '.nav-scroller-item',\n    buttonLeftSelector: buttonLeftSelector = '.nav-scroller-btn--left',\n    buttonRightSelector: buttonRightSelector = '.nav-scroller-btn--right',\n    scrollStep: scrollStep = 75\n  } = {}) {\n\n  const navScroller = typeof selector === 'string' ? document.querySelector(selector) : selector;\n\n  const validateScrollStep = function() {\n    return Number.isInteger(scrollStep) || scrollStep === 'average';\n  }\n\n  if (navScroller === undefined || navScroller === null || !validateScrollStep()) {\n    throw new Error('There is something wrong with your selector.');\n    return;\n  }\n\n  const navScrollerNav = navScroller.querySelector(navSelector);\n  const navScrollerContent = navScroller.querySelector(contentSelector);\n  const navScrollerContentItems = navScrollerContent.querySelectorAll(itemSelector);\n  const navScrollerLeft = navScroller.querySelector(buttonLeftSelector);\n  const navScrollerRight = navScroller.querySelector(buttonRightSelector);\n\n  let scrolling = false;\n  let scrollAvailableLeft = 0;\n  let scrollAvailableRight = 0;\n  let scrollingDirection = '';\n  let scrollOverflow = '';\n  let timeout;\n\n\n  /** Sets overflow and toggle buttons accordingly */\n  const setOverflow = function() {\n    scrollOverflow = getOverflow();\n    toggleButtons(scrollOverflow);\n    calculateScrollStep();\n  }\n\n\n  /** Debounce setting the overflow with requestAnimationFrame */\n  const requestSetOverflow = function() {\n    if (timeout) window.cancelAnimationFrame(timeout);\n\n    timeout = window.requestAnimationFrame(() => {\n      setOverflow();\n    });\n  }\n\n\n  /**\n   * Gets the overflow on the nav scroller\n   * @return {string} Left, right, both or none\n   */\n  const getOverflow = function() {\n    let scrollWidth = navScrollerNav.scrollWidth;\n    let scrollViewport = navScrollerNav.clientWidth;\n    let scrollLeft = navScrollerNav.scrollLeft;\n\n    scrollAvailableLeft = scrollLeft;\n    scrollAvailableRight = scrollWidth - (scrollViewport + scrollLeft);\n\n    // 1 instead of 0 to compensate for rounding errors from the browser\n    let scrollLeftCondition = scrollAvailableLeft > 1;\n    let scrollRightCondition = scrollAvailableRight > 1;\n\n    // console.log(scrollWidth, scrollViewport, scrollAvailableLeft, scrollAvailableRight);\n\n    if (scrollLeftCondition && scrollRightCondition) {\n      return 'both';\n    }\n    else if (scrollLeftCondition) {\n      return 'left';\n    }\n    else if (scrollRightCondition) {\n      return 'right';\n    }\n    else {\n      return 'none';\n    }\n\n  }\n\n\n  /** Calculates the scroll step based on the width of the scroller and the number of links */\n  const calculateScrollStep = function() {\n    if (scrollStep === 'average') {\n      let scrollViewportNoPadding = navScrollerNav.scrollWidth - (parseInt(getComputedStyle(navScrollerContent,null).getPropertyValue('padding-left'), 10) + parseInt(getComputedStyle(navScrollerContent,null).getPropertyValue('padding-right'), 10));\n\n      let scrollStepAverage = Math.floor(scrollViewportNoPadding / navScrollerContentItems.length);\n\n      scrollStep = scrollStepAverage;\n    }\n  }\n\n\n  /** Move the scroller with a transform */\n  const moveScroller = function(direction) {\n\n    if (scrolling === true || (scrollOverflow !== direction && scrollOverflow !== 'both')) return;\n\n    let scrollDistance = scrollStep;\n    let scrollAvailable = direction === 'left' ? scrollAvailableLeft : scrollAvailableRight;\n\n    // If there is less that 1.75 steps available then scroll the full way\n    if (scrollAvailable < (scrollStep * 1.75)) {\n      scrollDistance = scrollAvailable;\n    }\n\n    if (direction === 'right') {\n      scrollDistance *= -1;\n    }\n\n    navScrollerContent.classList.remove('no-transition');\n    navScrollerContent.style.transform = 'translateX(' + scrollDistance + 'px)';\n\n    scrollingDirection = direction;\n    scrolling = true;\n  }\n\n\n  /** Set the scroller position and removes transform, called after moveScroller() */\n  const setScrollerPosition = function() {\n    var style = window.getComputedStyle(navScrollerContent, null);\n    var transform = style.getPropertyValue('transform');\n    var transformValue = Math.abs(parseInt(transform.split(',')[4]) || 0);\n\n    if (scrollingDirection === 'left') {\n      transformValue *= -1;\n    }\n\n    navScrollerContent.classList.add('no-transition');\n    navScrollerContent.style.transform = '';\n    navScrollerNav.scrollLeft = navScrollerNav.scrollLeft + transformValue;\n    navScrollerContent.classList.remove('no-transition');\n\n    scrolling = false;\n  }\n\n\n  /** Toggle buttons depending on overflow */\n  const toggleButtons = function(overflow) {\n    if (overflow === 'both' || overflow === 'left') {\n      navScrollerLeft.classList.add('active');\n    }\n    else {\n      navScrollerLeft.classList.remove('active');\n    }\n\n    if (overflow === 'both' || overflow === 'right') {\n      navScrollerRight.classList.add('active');\n    }\n    else {\n      navScrollerRight.classList.remove('active');\n    }\n  }\n\n\n  /** Init plugin */\n  const init = function() {\n    setOverflow();\n\n    window.addEventListener('resize', () => {\n      requestSetOverflow();\n    });\n\n    navScrollerNav.addEventListener('scroll', () => {\n      requestSetOverflow();\n    });\n\n    navScrollerContent.addEventListener('transitionend', () => {\n      setScrollerPosition();\n    });\n\n    navScrollerLeft.addEventListener('click', () => {\n      moveScroller('left');\n    });\n\n    navScrollerRight.addEventListener('click', () => {\n      moveScroller('right');\n    });\n  };\n\n\n  // Init is called by default\n  init();\n\n\n  // Reveal API\n  return {\n    init\n  };\n\n};\n\nexport default PriorityNavScroller;\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHRzL21haW4uanMiLCJzY3JpcHRzL3ByaW9yaXR5LW5hdi1zY3JvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUE7Ozs7OztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLGVBQWUsU0FBUyxnQkFBVCxDQUEwQixlQUExQixDQUFuQjs7QUFFQSxhQUFhLE9BQWIsQ0FBcUIsVUFBQyxZQUFELEVBQWUsWUFBZixFQUFnQztBQUNuRCxxQ0FBb0I7QUFDbEIsY0FBVTtBQURRLEdBQXBCO0FBR0QsQ0FKRDs7Ozs7Ozs7QUNuQkE7Ozs7Ozs7Ozs7OztBQVlBLElBQU0sc0JBQXNCLFNBQXRCLG1CQUFzQixHQVFsQjtBQUFBLGlGQUFKLEVBQUk7QUFBQSwyQkFQTixRQU9NO0FBQUEsTUFQSSxRQU9KLGlDQVBlLGVBT2Y7QUFBQSw4QkFOTixXQU1NO0FBQUEsTUFOTyxXQU1QLG9DQU5xQixtQkFNckI7QUFBQSxrQ0FMTixlQUtNO0FBQUEsTUFMVyxlQUtYLHdDQUw2Qix1QkFLN0I7QUFBQSwrQkFKTixZQUlNO0FBQUEsTUFKUSxZQUlSLHFDQUp1QixvQkFJdkI7QUFBQSxtQ0FITixrQkFHTTtBQUFBLE1BSGMsa0JBR2QseUNBSG1DLHlCQUduQztBQUFBLG1DQUZOLG1CQUVNO0FBQUEsTUFGZSxtQkFFZix5Q0FGcUMsMEJBRXJDO0FBQUEsNkJBRE4sVUFDTTtBQUFBLE1BRE0sVUFDTixtQ0FEbUIsRUFDbkI7O0FBRVIsTUFBTSxjQUFjLE9BQU8sUUFBUCxLQUFvQixRQUFwQixHQUErQixTQUFTLGFBQVQsQ0FBdUIsUUFBdkIsQ0FBL0IsR0FBa0UsUUFBdEY7O0FBRUEsTUFBTSxxQkFBcUIsU0FBckIsa0JBQXFCLEdBQVc7QUFDcEMsV0FBTyxPQUFPLFNBQVAsQ0FBaUIsVUFBakIsS0FBZ0MsZUFBZSxTQUF0RDtBQUNELEdBRkQ7O0FBSUEsTUFBSSxnQkFBZ0IsU0FBaEIsSUFBNkIsZ0JBQWdCLElBQTdDLElBQXFELENBQUMsb0JBQTFELEVBQWdGO0FBQzlFLFVBQU0sSUFBSSxLQUFKLENBQVUsOENBQVYsQ0FBTjtBQUNBO0FBQ0Q7O0FBRUQsTUFBTSxpQkFBaUIsWUFBWSxhQUFaLENBQTBCLFdBQTFCLENBQXZCO0FBQ0EsTUFBTSxxQkFBcUIsWUFBWSxhQUFaLENBQTBCLGVBQTFCLENBQTNCO0FBQ0EsTUFBTSwwQkFBMEIsbUJBQW1CLGdCQUFuQixDQUFvQyxZQUFwQyxDQUFoQztBQUNBLE1BQU0sa0JBQWtCLFlBQVksYUFBWixDQUEwQixrQkFBMUIsQ0FBeEI7QUFDQSxNQUFNLG1CQUFtQixZQUFZLGFBQVosQ0FBMEIsbUJBQTFCLENBQXpCOztBQUVBLE1BQUksWUFBWSxLQUFoQjtBQUNBLE1BQUksc0JBQXNCLENBQTFCO0FBQ0EsTUFBSSx1QkFBdUIsQ0FBM0I7QUFDQSxNQUFJLHFCQUFxQixFQUF6QjtBQUNBLE1BQUksaUJBQWlCLEVBQXJCO0FBQ0EsTUFBSSxnQkFBSjs7QUFHQTtBQUNBLE1BQU0sY0FBYyxTQUFkLFdBQWMsR0FBVztBQUM3QixxQkFBaUIsYUFBakI7QUFDQSxrQkFBYyxjQUFkO0FBQ0E7QUFDRCxHQUpEOztBQU9BO0FBQ0EsTUFBTSxxQkFBcUIsU0FBckIsa0JBQXFCLEdBQVc7QUFDcEMsUUFBSSxPQUFKLEVBQWEsT0FBTyxvQkFBUCxDQUE0QixPQUE1Qjs7QUFFYixjQUFVLE9BQU8scUJBQVAsQ0FBNkIsWUFBTTtBQUMzQztBQUNELEtBRlMsQ0FBVjtBQUdELEdBTkQ7O0FBU0E7Ozs7QUFJQSxNQUFNLGNBQWMsU0FBZCxXQUFjLEdBQVc7QUFDN0IsUUFBSSxjQUFjLGVBQWUsV0FBakM7QUFDQSxRQUFJLGlCQUFpQixlQUFlLFdBQXBDO0FBQ0EsUUFBSSxhQUFhLGVBQWUsVUFBaEM7O0FBRUEsMEJBQXNCLFVBQXRCO0FBQ0EsMkJBQXVCLGVBQWUsaUJBQWlCLFVBQWhDLENBQXZCOztBQUVBO0FBQ0EsUUFBSSxzQkFBc0Isc0JBQXNCLENBQWhEO0FBQ0EsUUFBSSx1QkFBdUIsdUJBQXVCLENBQWxEOztBQUVBOztBQUVBLFFBQUksdUJBQXVCLG9CQUEzQixFQUFpRDtBQUMvQyxhQUFPLE1BQVA7QUFDRCxLQUZELE1BR0ssSUFBSSxtQkFBSixFQUF5QjtBQUM1QixhQUFPLE1BQVA7QUFDRCxLQUZJLE1BR0EsSUFBSSxvQkFBSixFQUEwQjtBQUM3QixhQUFPLE9BQVA7QUFDRCxLQUZJLE1BR0E7QUFDSCxhQUFPLE1BQVA7QUFDRDtBQUVGLEdBM0JEOztBQThCQTtBQUNBLE1BQU0sc0JBQXNCLFNBQXRCLG1CQUFzQixHQUFXO0FBQ3JDLFFBQUksZUFBZSxTQUFuQixFQUE4QjtBQUM1QixVQUFJLDBCQUEwQixlQUFlLFdBQWYsSUFBOEIsU0FBUyxpQkFBaUIsa0JBQWpCLEVBQW9DLElBQXBDLEVBQTBDLGdCQUExQyxDQUEyRCxjQUEzRCxDQUFULEVBQXFGLEVBQXJGLElBQTJGLFNBQVMsaUJBQWlCLGtCQUFqQixFQUFvQyxJQUFwQyxFQUEwQyxnQkFBMUMsQ0FBMkQsZUFBM0QsQ0FBVCxFQUFzRixFQUF0RixDQUF6SCxDQUE5Qjs7QUFFQSxVQUFJLG9CQUFvQixLQUFLLEtBQUwsQ0FBVywwQkFBMEIsd0JBQXdCLE1BQTdELENBQXhCOztBQUVBLG1CQUFhLGlCQUFiO0FBQ0Q7QUFDRixHQVJEOztBQVdBO0FBQ0EsTUFBTSxlQUFlLFNBQWYsWUFBZSxDQUFTLFNBQVQsRUFBb0I7O0FBRXZDLFFBQUksY0FBYyxJQUFkLElBQXVCLG1CQUFtQixTQUFuQixJQUFnQyxtQkFBbUIsTUFBOUUsRUFBdUY7O0FBRXZGLFFBQUksaUJBQWlCLFVBQXJCO0FBQ0EsUUFBSSxrQkFBa0IsY0FBYyxNQUFkLEdBQXVCLG1CQUF2QixHQUE2QyxvQkFBbkU7O0FBRUE7QUFDQSxRQUFJLGtCQUFtQixhQUFhLElBQXBDLEVBQTJDO0FBQ3pDLHVCQUFpQixlQUFqQjtBQUNEOztBQUVELFFBQUksY0FBYyxPQUFsQixFQUEyQjtBQUN6Qix3QkFBa0IsQ0FBQyxDQUFuQjtBQUNEOztBQUVELHVCQUFtQixTQUFuQixDQUE2QixNQUE3QixDQUFvQyxlQUFwQztBQUNBLHVCQUFtQixLQUFuQixDQUF5QixTQUF6QixHQUFxQyxnQkFBZ0IsY0FBaEIsR0FBaUMsS0FBdEU7O0FBRUEseUJBQXFCLFNBQXJCO0FBQ0EsZ0JBQVksSUFBWjtBQUNELEdBckJEOztBQXdCQTtBQUNBLE1BQU0sc0JBQXNCLFNBQXRCLG1CQUFzQixHQUFXO0FBQ3JDLFFBQUksUUFBUSxPQUFPLGdCQUFQLENBQXdCLGtCQUF4QixFQUE0QyxJQUE1QyxDQUFaO0FBQ0EsUUFBSSxZQUFZLE1BQU0sZ0JBQU4sQ0FBdUIsV0FBdkIsQ0FBaEI7QUFDQSxRQUFJLGlCQUFpQixLQUFLLEdBQUwsQ0FBUyxTQUFTLFVBQVUsS0FBVixDQUFnQixHQUFoQixFQUFxQixDQUFyQixDQUFULEtBQXFDLENBQTlDLENBQXJCOztBQUVBLFFBQUksdUJBQXVCLE1BQTNCLEVBQW1DO0FBQ2pDLHdCQUFrQixDQUFDLENBQW5CO0FBQ0Q7O0FBRUQsdUJBQW1CLFNBQW5CLENBQTZCLEdBQTdCLENBQWlDLGVBQWpDO0FBQ0EsdUJBQW1CLEtBQW5CLENBQXlCLFNBQXpCLEdBQXFDLEVBQXJDO0FBQ0EsbUJBQWUsVUFBZixHQUE0QixlQUFlLFVBQWYsR0FBNEIsY0FBeEQ7QUFDQSx1QkFBbUIsU0FBbkIsQ0FBNkIsTUFBN0IsQ0FBb0MsZUFBcEM7O0FBRUEsZ0JBQVksS0FBWjtBQUNELEdBZkQ7O0FBa0JBO0FBQ0EsTUFBTSxnQkFBZ0IsU0FBaEIsYUFBZ0IsQ0FBUyxRQUFULEVBQW1CO0FBQ3ZDLFFBQUksYUFBYSxNQUFiLElBQXVCLGFBQWEsTUFBeEMsRUFBZ0Q7QUFDOUMsc0JBQWdCLFNBQWhCLENBQTBCLEdBQTFCLENBQThCLFFBQTlCO0FBQ0QsS0FGRCxNQUdLO0FBQ0gsc0JBQWdCLFNBQWhCLENBQTBCLE1BQTFCLENBQWlDLFFBQWpDO0FBQ0Q7O0FBRUQsUUFBSSxhQUFhLE1BQWIsSUFBdUIsYUFBYSxPQUF4QyxFQUFpRDtBQUMvQyx1QkFBaUIsU0FBakIsQ0FBMkIsR0FBM0IsQ0FBK0IsUUFBL0I7QUFDRCxLQUZELE1BR0s7QUFDSCx1QkFBaUIsU0FBakIsQ0FBMkIsTUFBM0IsQ0FBa0MsUUFBbEM7QUFDRDtBQUNGLEdBZEQ7O0FBaUJBO0FBQ0EsTUFBTSxPQUFPLFNBQVAsSUFBTyxHQUFXO0FBQ3RCOztBQUVBLFdBQU8sZ0JBQVAsQ0FBd0IsUUFBeEIsRUFBa0MsWUFBTTtBQUN0QztBQUNELEtBRkQ7O0FBSUEsbUJBQWUsZ0JBQWYsQ0FBZ0MsUUFBaEMsRUFBMEMsWUFBTTtBQUM5QztBQUNELEtBRkQ7O0FBSUEsdUJBQW1CLGdCQUFuQixDQUFvQyxlQUFwQyxFQUFxRCxZQUFNO0FBQ3pEO0FBQ0QsS0FGRDs7QUFJQSxvQkFBZ0IsZ0JBQWhCLENBQWlDLE9BQWpDLEVBQTBDLFlBQU07QUFDOUMsbUJBQWEsTUFBYjtBQUNELEtBRkQ7O0FBSUEscUJBQWlCLGdCQUFqQixDQUFrQyxPQUFsQyxFQUEyQyxZQUFNO0FBQy9DLG1CQUFhLE9BQWI7QUFDRCxLQUZEO0FBR0QsR0F0QkQ7O0FBeUJBO0FBQ0E7O0FBR0E7QUFDQSxTQUFPO0FBQ0w7QUFESyxHQUFQO0FBSUQsQ0FwTUQ7O2tCQXNNZSxtQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBQcmlvcml0eU5hdlNjcm9sbGVyIGZyb20gJy4vcHJpb3JpdHktbmF2LXNjcm9sbGVyLmpzJztcblxuLy8gLy8gSW5pdCB3aXRoIGRlZmF1bHQgc2V0dXBcbi8vIGNvbnN0IHByaW9yaXR5TmF2U2Nyb2xsZXJEZWZhdWx0ID0gUHJpb3JpdHlOYXZTY3JvbGxlcigpO1xuXG4vLyAvLyBJbml0IHdpdGggYWxsIG9wdGlvbnMgYXQgZGVmYXVsdCBzZXR0aW5nXG4vLyBjb25zdCBwcmlvcml0eU5hdlNjcm9sbGVyRGVmYXVsdCA9IFByaW9yaXR5TmF2U2Nyb2xsZXIoe1xuLy8gICBzZWxlY3RvcjogJy5uYXYtc2Nyb2xsZXInLFxuLy8gICBuYXZTZWxlY3RvcjogJy5uYXYtc2Nyb2xsZXItbmF2Jyxcbi8vICAgY29udGVudFNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci1jb250ZW50Jyxcbi8vICAgaXRlbVNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci1pdGVtJyxcbi8vICAgYnV0dG9uTGVmdFNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci1idG4tLWxlZnQnLFxuLy8gICBidXR0b25SaWdodFNlbGVjdG9yOiAnLm5hdi1zY3JvbGxlci1idG4tLXJpZ2h0Jyxcbi8vICAgc2Nyb2xsU3RlcDogNzVcbi8vIH0pO1xuXG4vLyBJbml0IG11bHRpcGxlIG5hdiBzY3JvbGxlcnMgd2l0aCB0aGUgc2FtZSBvcHRpb25zXG5sZXQgbmF2U2Nyb2xsZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdi1zY3JvbGxlcicpO1xuXG5uYXZTY3JvbGxlcnMuZm9yRWFjaCgoY3VycmVudFZhbHVlLCBjdXJyZW50SW5kZXgpID0+IHtcbiAgUHJpb3JpdHlOYXZTY3JvbGxlcih7XG4gICAgc2VsZWN0b3I6IGN1cnJlbnRWYWx1ZVxuICB9KTtcbn0pO1xuIiwiLyoqXG4gKiBQcmlvcml0eSsgaG9yaXpvbnRhbCBzY3JvbGxpbmcgbWVudS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgLSBDb250YWluZXIgZm9yIGFsbCBvcHRpb25zLlxuICogQHBhcmFtIHtzdHJpbmcgfHwgRE9NIG5vZGV9IHNlbGVjdG9yIC0gRWxlbWVudCBzZWxlY3Rvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYXZTZWxlY3RvciAtIE5hdiBlbGVtZW50IHNlbGVjdG9yLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRTZWxlY3RvciAtIENvbnRlbnQgZWxlbWVudCBzZWxlY3Rvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtU2VsZWN0b3IgLSBJdGVtcyBzZWxlY3Rvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBidXR0b25MZWZ0U2VsZWN0b3IgLSBMZWZ0IGJ1dHRvbiBzZWxlY3Rvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBidXR0b25SaWdodFNlbGVjdG9yIC0gUmlnaHQgYnV0dG9uIHNlbGVjdG9yLlxuICogQHBhcmFtIHtpbnRlZ2VyIHx8IHN0cmluZ30gc2Nyb2xsU3RlcCAtIEFtb3VudCB0byBzY3JvbGwgb24gYnV0dG9uIGNsaWNrLlxuICovXG5cbmNvbnN0IFByaW9yaXR5TmF2U2Nyb2xsZXIgPSBmdW5jdGlvbih7XG4gICAgc2VsZWN0b3I6IHNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXInLFxuICAgIG5hdlNlbGVjdG9yOiBuYXZTZWxlY3RvciA9ICcubmF2LXNjcm9sbGVyLW5hdicsXG4gICAgY29udGVudFNlbGVjdG9yOiBjb250ZW50U2VsZWN0b3IgPSAnLm5hdi1zY3JvbGxlci1jb250ZW50JyxcbiAgICBpdGVtU2VsZWN0b3I6IGl0ZW1TZWxlY3RvciA9ICcubmF2LXNjcm9sbGVyLWl0ZW0nLFxuICAgIGJ1dHRvbkxlZnRTZWxlY3RvcjogYnV0dG9uTGVmdFNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXItYnRuLS1sZWZ0JyxcbiAgICBidXR0b25SaWdodFNlbGVjdG9yOiBidXR0b25SaWdodFNlbGVjdG9yID0gJy5uYXYtc2Nyb2xsZXItYnRuLS1yaWdodCcsXG4gICAgc2Nyb2xsU3RlcDogc2Nyb2xsU3RlcCA9IDc1XG4gIH0gPSB7fSkge1xuXG4gIGNvbnN0IG5hdlNjcm9sbGVyID0gdHlwZW9mIHNlbGVjdG9yID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpIDogc2VsZWN0b3I7XG5cbiAgY29uc3QgdmFsaWRhdGVTY3JvbGxTdGVwID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE51bWJlci5pc0ludGVnZXIoc2Nyb2xsU3RlcCkgfHwgc2Nyb2xsU3RlcCA9PT0gJ2F2ZXJhZ2UnO1xuICB9XG5cbiAgaWYgKG5hdlNjcm9sbGVyID09PSB1bmRlZmluZWQgfHwgbmF2U2Nyb2xsZXIgPT09IG51bGwgfHwgIXZhbGlkYXRlU2Nyb2xsU3RlcCgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGVyZSBpcyBzb21ldGhpbmcgd3Jvbmcgd2l0aCB5b3VyIHNlbGVjdG9yLicpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IG5hdlNjcm9sbGVyTmF2ID0gbmF2U2Nyb2xsZXIucXVlcnlTZWxlY3RvcihuYXZTZWxlY3Rvcik7XG4gIGNvbnN0IG5hdlNjcm9sbGVyQ29udGVudCA9IG5hdlNjcm9sbGVyLnF1ZXJ5U2VsZWN0b3IoY29udGVudFNlbGVjdG9yKTtcbiAgY29uc3QgbmF2U2Nyb2xsZXJDb250ZW50SXRlbXMgPSBuYXZTY3JvbGxlckNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChpdGVtU2VsZWN0b3IpO1xuICBjb25zdCBuYXZTY3JvbGxlckxlZnQgPSBuYXZTY3JvbGxlci5xdWVyeVNlbGVjdG9yKGJ1dHRvbkxlZnRTZWxlY3Rvcik7XG4gIGNvbnN0IG5hdlNjcm9sbGVyUmlnaHQgPSBuYXZTY3JvbGxlci5xdWVyeVNlbGVjdG9yKGJ1dHRvblJpZ2h0U2VsZWN0b3IpO1xuXG4gIGxldCBzY3JvbGxpbmcgPSBmYWxzZTtcbiAgbGV0IHNjcm9sbEF2YWlsYWJsZUxlZnQgPSAwO1xuICBsZXQgc2Nyb2xsQXZhaWxhYmxlUmlnaHQgPSAwO1xuICBsZXQgc2Nyb2xsaW5nRGlyZWN0aW9uID0gJyc7XG4gIGxldCBzY3JvbGxPdmVyZmxvdyA9ICcnO1xuICBsZXQgdGltZW91dDtcblxuXG4gIC8qKiBTZXRzIG92ZXJmbG93IGFuZCB0b2dnbGUgYnV0dG9ucyBhY2NvcmRpbmdseSAqL1xuICBjb25zdCBzZXRPdmVyZmxvdyA9IGZ1bmN0aW9uKCkge1xuICAgIHNjcm9sbE92ZXJmbG93ID0gZ2V0T3ZlcmZsb3coKTtcbiAgICB0b2dnbGVCdXR0b25zKHNjcm9sbE92ZXJmbG93KTtcbiAgICBjYWxjdWxhdGVTY3JvbGxTdGVwKCk7XG4gIH1cblxuXG4gIC8qKiBEZWJvdW5jZSBzZXR0aW5nIHRoZSBvdmVyZmxvdyB3aXRoIHJlcXVlc3RBbmltYXRpb25GcmFtZSAqL1xuICBjb25zdCByZXF1ZXN0U2V0T3ZlcmZsb3cgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGltZW91dCkgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRpbWVvdXQpO1xuXG4gICAgdGltZW91dCA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgc2V0T3ZlcmZsb3coKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIG92ZXJmbG93IG9uIHRoZSBuYXYgc2Nyb2xsZXJcbiAgICogQHJldHVybiB7c3RyaW5nfSBMZWZ0LCByaWdodCwgYm90aCBvciBub25lXG4gICAqL1xuICBjb25zdCBnZXRPdmVyZmxvdyA9IGZ1bmN0aW9uKCkge1xuICAgIGxldCBzY3JvbGxXaWR0aCA9IG5hdlNjcm9sbGVyTmF2LnNjcm9sbFdpZHRoO1xuICAgIGxldCBzY3JvbGxWaWV3cG9ydCA9IG5hdlNjcm9sbGVyTmF2LmNsaWVudFdpZHRoO1xuICAgIGxldCBzY3JvbGxMZWZ0ID0gbmF2U2Nyb2xsZXJOYXYuc2Nyb2xsTGVmdDtcblxuICAgIHNjcm9sbEF2YWlsYWJsZUxlZnQgPSBzY3JvbGxMZWZ0O1xuICAgIHNjcm9sbEF2YWlsYWJsZVJpZ2h0ID0gc2Nyb2xsV2lkdGggLSAoc2Nyb2xsVmlld3BvcnQgKyBzY3JvbGxMZWZ0KTtcblxuICAgIC8vIDEgaW5zdGVhZCBvZiAwIHRvIGNvbXBlbnNhdGUgZm9yIHJvdW5kaW5nIGVycm9ycyBmcm9tIHRoZSBicm93c2VyXG4gICAgbGV0IHNjcm9sbExlZnRDb25kaXRpb24gPSBzY3JvbGxBdmFpbGFibGVMZWZ0ID4gMTtcbiAgICBsZXQgc2Nyb2xsUmlnaHRDb25kaXRpb24gPSBzY3JvbGxBdmFpbGFibGVSaWdodCA+IDE7XG5cbiAgICAvLyBjb25zb2xlLmxvZyhzY3JvbGxXaWR0aCwgc2Nyb2xsVmlld3BvcnQsIHNjcm9sbEF2YWlsYWJsZUxlZnQsIHNjcm9sbEF2YWlsYWJsZVJpZ2h0KTtcblxuICAgIGlmIChzY3JvbGxMZWZ0Q29uZGl0aW9uICYmIHNjcm9sbFJpZ2h0Q29uZGl0aW9uKSB7XG4gICAgICByZXR1cm4gJ2JvdGgnO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY3JvbGxMZWZ0Q29uZGl0aW9uKSB7XG4gICAgICByZXR1cm4gJ2xlZnQnO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY3JvbGxSaWdodENvbmRpdGlvbikge1xuICAgICAgcmV0dXJuICdyaWdodCc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuICdub25lJztcbiAgICB9XG5cbiAgfVxuXG5cbiAgLyoqIENhbGN1bGF0ZXMgdGhlIHNjcm9sbCBzdGVwIGJhc2VkIG9uIHRoZSB3aWR0aCBvZiB0aGUgc2Nyb2xsZXIgYW5kIHRoZSBudW1iZXIgb2YgbGlua3MgKi9cbiAgY29uc3QgY2FsY3VsYXRlU2Nyb2xsU3RlcCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChzY3JvbGxTdGVwID09PSAnYXZlcmFnZScpIHtcbiAgICAgIGxldCBzY3JvbGxWaWV3cG9ydE5vUGFkZGluZyA9IG5hdlNjcm9sbGVyTmF2LnNjcm9sbFdpZHRoIC0gKHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUobmF2U2Nyb2xsZXJDb250ZW50LG51bGwpLmdldFByb3BlcnR5VmFsdWUoJ3BhZGRpbmctbGVmdCcpLCAxMCkgKyBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKG5hdlNjcm9sbGVyQ29udGVudCxudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKCdwYWRkaW5nLXJpZ2h0JyksIDEwKSk7XG5cbiAgICAgIGxldCBzY3JvbGxTdGVwQXZlcmFnZSA9IE1hdGguZmxvb3Ioc2Nyb2xsVmlld3BvcnROb1BhZGRpbmcgLyBuYXZTY3JvbGxlckNvbnRlbnRJdGVtcy5sZW5ndGgpO1xuXG4gICAgICBzY3JvbGxTdGVwID0gc2Nyb2xsU3RlcEF2ZXJhZ2U7XG4gICAgfVxuICB9XG5cblxuICAvKiogTW92ZSB0aGUgc2Nyb2xsZXIgd2l0aCBhIHRyYW5zZm9ybSAqL1xuICBjb25zdCBtb3ZlU2Nyb2xsZXIgPSBmdW5jdGlvbihkaXJlY3Rpb24pIHtcblxuICAgIGlmIChzY3JvbGxpbmcgPT09IHRydWUgfHwgKHNjcm9sbE92ZXJmbG93ICE9PSBkaXJlY3Rpb24gJiYgc2Nyb2xsT3ZlcmZsb3cgIT09ICdib3RoJykpIHJldHVybjtcblxuICAgIGxldCBzY3JvbGxEaXN0YW5jZSA9IHNjcm9sbFN0ZXA7XG4gICAgbGV0IHNjcm9sbEF2YWlsYWJsZSA9IGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gc2Nyb2xsQXZhaWxhYmxlTGVmdCA6IHNjcm9sbEF2YWlsYWJsZVJpZ2h0O1xuXG4gICAgLy8gSWYgdGhlcmUgaXMgbGVzcyB0aGF0IDEuNzUgc3RlcHMgYXZhaWxhYmxlIHRoZW4gc2Nyb2xsIHRoZSBmdWxsIHdheVxuICAgIGlmIChzY3JvbGxBdmFpbGFibGUgPCAoc2Nyb2xsU3RlcCAqIDEuNzUpKSB7XG4gICAgICBzY3JvbGxEaXN0YW5jZSA9IHNjcm9sbEF2YWlsYWJsZTtcbiAgICB9XG5cbiAgICBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICBzY3JvbGxEaXN0YW5jZSAqPSAtMTtcbiAgICB9XG5cbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnbm8tdHJhbnNpdGlvbicpO1xuICAgIG5hdlNjcm9sbGVyQ29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgnICsgc2Nyb2xsRGlzdGFuY2UgKyAncHgpJztcblxuICAgIHNjcm9sbGluZ0RpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICBzY3JvbGxpbmcgPSB0cnVlO1xuICB9XG5cblxuICAvKiogU2V0IHRoZSBzY3JvbGxlciBwb3NpdGlvbiBhbmQgcmVtb3ZlcyB0cmFuc2Zvcm0sIGNhbGxlZCBhZnRlciBtb3ZlU2Nyb2xsZXIoKSAqL1xuICBjb25zdCBzZXRTY3JvbGxlclBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUobmF2U2Nyb2xsZXJDb250ZW50LCBudWxsKTtcbiAgICB2YXIgdHJhbnNmb3JtID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNmb3JtJyk7XG4gICAgdmFyIHRyYW5zZm9ybVZhbHVlID0gTWF0aC5hYnMocGFyc2VJbnQodHJhbnNmb3JtLnNwbGl0KCcsJylbNF0pIHx8IDApO1xuXG4gICAgaWYgKHNjcm9sbGluZ0RpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICB0cmFuc2Zvcm1WYWx1ZSAqPSAtMTtcbiAgICB9XG5cbiAgICBuYXZTY3JvbGxlckNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnbm8tdHJhbnNpdGlvbicpO1xuICAgIG5hdlNjcm9sbGVyQ29udGVudC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICBuYXZTY3JvbGxlck5hdi5zY3JvbGxMZWZ0ID0gbmF2U2Nyb2xsZXJOYXYuc2Nyb2xsTGVmdCArIHRyYW5zZm9ybVZhbHVlO1xuICAgIG5hdlNjcm9sbGVyQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCduby10cmFuc2l0aW9uJyk7XG5cbiAgICBzY3JvbGxpbmcgPSBmYWxzZTtcbiAgfVxuXG5cbiAgLyoqIFRvZ2dsZSBidXR0b25zIGRlcGVuZGluZyBvbiBvdmVyZmxvdyAqL1xuICBjb25zdCB0b2dnbGVCdXR0b25zID0gZnVuY3Rpb24ob3ZlcmZsb3cpIHtcbiAgICBpZiAob3ZlcmZsb3cgPT09ICdib3RoJyB8fCBvdmVyZmxvdyA9PT0gJ2xlZnQnKSB7XG4gICAgICBuYXZTY3JvbGxlckxlZnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbmF2U2Nyb2xsZXJMZWZ0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChvdmVyZmxvdyA9PT0gJ2JvdGgnIHx8IG92ZXJmbG93ID09PSAncmlnaHQnKSB7XG4gICAgICBuYXZTY3JvbGxlclJpZ2h0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIG5hdlNjcm9sbGVyUmlnaHQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cblxuICAvKiogSW5pdCBwbHVnaW4gKi9cbiAgY29uc3QgaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHNldE92ZXJmbG93KCk7XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgcmVxdWVzdFNldE92ZXJmbG93KCk7XG4gICAgfSk7XG5cbiAgICBuYXZTY3JvbGxlck5hdi5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICByZXF1ZXN0U2V0T3ZlcmZsb3coKTtcbiAgICB9KTtcblxuICAgIG5hdlNjcm9sbGVyQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgKCkgPT4ge1xuICAgICAgc2V0U2Nyb2xsZXJQb3NpdGlvbigpO1xuICAgIH0pO1xuXG4gICAgbmF2U2Nyb2xsZXJMZWZ0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW92ZVNjcm9sbGVyKCdsZWZ0Jyk7XG4gICAgfSk7XG5cbiAgICBuYXZTY3JvbGxlclJpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbW92ZVNjcm9sbGVyKCdyaWdodCcpO1xuICAgIH0pO1xuICB9O1xuXG5cbiAgLy8gSW5pdCBpcyBjYWxsZWQgYnkgZGVmYXVsdFxuICBpbml0KCk7XG5cblxuICAvLyBSZXZlYWwgQVBJXG4gIHJldHVybiB7XG4gICAgaW5pdFxuICB9O1xuXG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcmlvcml0eU5hdlNjcm9sbGVyO1xuIl19"}